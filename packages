# install and load pacman
if (!requireNamespace("pacman", quietly = TRUE))
  install.packages("pacman")
library(pacman)

# Function to install and load packages using pacman
# Takes a vector of package names, with a default value
# Returns a message indicating that the packages have been loaded
load_packages <- function(packages = c(dplyr, tidyverse, ggplot2, janitor, skimr, ggpubr, performance, knitr, xfun, rmarkdown, reshape2, lme4, stringr, lubridate)) {
  if (!is.vector(packages) || !is.character(packages)) {
    stop("packages must be a vector of character strings, see help_load_packages()")
  }
  if (length(packages) == 0) {
    stop("packages must not be empty, see help_fct('load_packages')")
  }
    # use p_load to install and load the packages
    pacman::p_load(packages) 

  # Return a message indicating that the packages have been loaded
  return(paste("The following packages have been loaded:", paste(packages, collapse = ", ")))
}

load_packages()

help_load_packages <- function(){print("Installs and loads the most common packages and the prerequirements for using the other functions in this package, by default 'packages = c(dplyr, tidyverse, ggplot2, janitor, skimr, ggpubr, performance, knitr, xfun, rmarkdown, reshape2, lme4, stringr, lubridate' are loaded. Create a character string or vector to add more packages.")}